function selectBoxes(){var e=$(".selectBox");e.each(function(){var e=$(this);if(e.data("binded")!==!0){var t=e.find("input[type=hidden]"),a=e.children(".selected"),o=function(e,a){i(e),t.val(a).trigger("change")},i=function(e){a.html(e)};""===t.val()?a.html(a.attr("data-placeholder")):i(e.find('.selectOption[data-value="'+t.val()+'"]').html()),e.on("click",function(t){$(this).toggleClass("is-visible");var a=$(t.target);a.hasClass("selected")||a.hasClass("selectArrow")?($(".selectBox").not(e).parent(".dropdown-holder").removeClass("is-expanded"),$(".selectBox").not(e).find(".selectOptions").removeClass("shown"),e.toggleClass("toggleClose").parents(".dropdown-holder:first").toggleClass("is-expanded").end().find(".selectOptions").toggleClass("shown")):a.hasClass("selectOption")&&(o(a.html(),a.attr("data-value")),e.toggleClass("toggleClose").parents(".dropdown-holder").toggleClass("is-expanded").end().find(".selectOptions").toggleClass("shown"))}),e.data("binded",!0)}})}function initializeMap(e){var t=new google.maps.LatLng(52.406374,16.925168),a={zoom:8,minZoom:2,center:t,disableDefaultUI:!0,styles:mapstyle,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map"),a);setMarkers(o,e),$("body").hasClass("home-page")&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);new google.maps.Marker({position:t,map:o,icon:"bundles/acardfrontend/img/marker-violet-big.png"})},function(){handleNoGeolocation(!0)}):handleNoGeolocation(!1))}function setMarkers(e,t){function a(e,t,a,o){google.maps.event.addListener(e,"click",function(){a.setContent(o),a.open(t,e),this.setIcon(iconChange)})}var o,i,n;for(n=new InfoBubble({minWidth:300,maxWidth:750,disableAutoPan:!0,hideCloseButton:!0,padding:0,minHeight:100,maxHeight:5e3,arrowSize:10,shadowStyle:0,borderRadius:0}),i=0;i<t.length;i++){var s=t[i],r=new google.maps.LatLng(s[1],s[2]),l="bundles/acardfrontend/img/marker-violet-big.png";iconChange="bundles/acardfrontend/img/marker-violet-big.png",eventCity=s[0],eventDate=s[4],eventAddress=s[5],eventStreet=s[6],eventHours=s[7],eventExtra=s[8],o=new google.maps.Marker({position:r,map:e,title:s[0],icon:l});var d='<div class="marker"><b class="violet">'+eventCity+","+eventDate+"</b><br><b>"+eventAddress+"</b><br><b>"+eventStreet+'</b><br><span class="eventHours">'+eventHours+'</span><br><br><span class="extraEvents">'+eventExtra+"</div><br>";a(o,e,n,d),google.maps.event.addListener(e,"click",function(){n.close(e,o)})}}function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:300,width:460,videoId:"N4RUslbrOxM",playerVars:{controls:0,modestbranding:0,showinfo:0,rel:0,wmode:"opaque"},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}),modalPlayer=new YT.Player("modalplayer",{height:360,width:640,videoId:$("#video").data("videoid"),playerVars:{controls:0,modestbranding:0,showinfo:0,rel:0,wmode:"opaque"}})}function onPlayerReady(e){interval||(interval=window.setInterval(function(){$(".drag").css("width",parseFloat(100*parseInt(e.target.getCurrentTime())/parseInt(e.target.getDuration()))+"%")},1e3)),$(".volumeControl img").click(function(){var e=player.getVolume();$(this).is("#volumeup")?player.setVolume(e+20):player.setVolume(e-20)}),$(".progressBar").click(function(e){var t=(e.pageX-$(this).offset().left)/$(".progressBar").outerWidth();player.seekTo(""+Math.round(player.getDuration()*t))})}function onPlayerStateChange(e){e.data==YT.PlayerState.PLAYING}function onPlayerReadyModal(e){e.target.playVideo()}!function(e){e.fn.equalHeights=function(t,a){return tallest=t?t:0,this.each(function(){e(this).height()>tallest&&(tallest=e(this).height())}),a&&tallest>a&&(tallest=a),this.each(function(){e(this).removeAttr("style").height(tallest).css("overflow","hidden")})}}(jQuery);for(var equalHeightsSet=function(){$(".m-teaser-box-desc p").equalHeights(),$("body").hasClass("contact-page")&&$(".col-sm-8, .col-sm-4").equalHeights()},sites=[["Poznań",52.406374,16.925168,4,"Wielkopolskie","29.04.2014","M1 Centrum Handlowe Poznań","ul. Szwajcarska 14","Poniedziałek - Sobota: 9-17<br>Niedziela: 10-14","informacje dodatkowe"]],provinces={},prHTML="",lt=53.758983,lg=18.619385,i=0;i<sites.length;i++){var province=sites[i][5];void 0===provinces[province]&&(provinces[province]=[],prHTML+='<span class="selectOption selectOptionProvince" data-value="'+province+'">'+province+"</span>"),provinces[province].push(sites[i])}$("#provinces").html(prHTML).mCustomScrollbar(),$(document).on("click",".selectOptionProvince",function(){for(var e=$(this).attr("data-value"),t=provinces[e],a="",o=[],i=0;i<t.length;i++)-1===o.indexOf(t[i][0])&&(a+='<span class="selectOption selectOptionCity" data-value="'+t[i][0]+'" data-province="'+e+'">'+t[i][0]+"</span>",o.push(t[i][0]));if($("#cities").html(a),$("#cityLabel").text("Miasto"),void 0!=t[0])var n=t[0][1],s=t[0][2];$("#cities").mCustomScrollbar({advanced:{updateOnContentResize:!0}}),initializeMap(t,n,s)}),$(document).on("click",".selectOptionCity",function(){for(var e=$(this),t=e.attr("data-value"),a=e.attr("data-province"),o=provinces[a],i=[],n=0;n<o.length;n++)o[n][0]==t&&i.push(o[n]);if(void 0!=o[0])var s=o[0][1],r=o[0][2];initializeMap(i,s,r)});var mapstyle=[{featureType:"water",stylers:[{visibility:"on"},{color:"#b5cbe4"}]},{featureType:"landscape",stylers:[{color:"#efefef"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#83a5b0"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#bdcdd3"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e3eed3"}]},{featureType:"administrative",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"road"},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{},{featureType:"road",stylers:[{lightness:20}]}],tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player,interval=!1;!function(e){e.fn.changeVideo=function(){player.loadVideoById(e(this).data("videoid"))}}(jQuery),$(window).load(function(){$(".m-photogallery-slides").mCustomScrollbar({horizontalScroll:!0,autoDraggerLength:!1,mouseWheelPixels:320}),$(".selectOptions").mCustomScrollbar()}),$(document).ready(function(){($("body").hasClass("home-page")||$("body").hasClass("kalendarium"))&&initializeMap(sites,lt,lg),equalHeightsSet(),selectBoxes(),$(".videoItem").click(function(){$(this).changeVideo()}),$("a.nyroModal").nyroModal({zIndexStart:9999,galleryCounts:!1})}),$(document).mouseup(function(e){var t=$(".modal-dialog");t.is(e.target)||0!==t.has(e.target).length||$("#video").modal("hide")}),$(window).scroll(function(){var e=$(".m-teasers-container").offset().top,t=$(document).scrollTop(),a=$(".m-aside").offset().top,o=$(".page-content-article").height()-$(".m-aside-inside").height()+12;t>=a&&$(".m-aside .m-aside-inside").css({position:"fixed",width:"300px",top:"10px"}),a>=t&&$(".m-aside .m-aside-inside").removeAttr("style"),e-t<=$(".m-aside-inside").height()&&$(".m-aside .m-aside-inside").removeAttr("style").css({position:"absolute",top:o})});